<!DOCTYPE html>
<html>
<head>
    <title>Reddit Comments in Markdown</title>
    <style>
        #container {
            position: relative;
            width: 100%;
        }
        #output {
            width: 100%;
            height: 200px;
        }
        #copyButton {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <input type="text" id="url" placeholder="Enter the Reddit post URL">
    <button onclick="getComments()">Get Comments</button>
    <div id="container">
        <textarea id="output"></textarea>
        <svg id="copyButton" onclick="copyToClipboard()" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
            <path d="M6 1a2 2 0 0 0-2 2v1H4a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H6zm0 1h4v1H6V2z"/>
        </svg>
    </div>

    <script>
        async function getComments() {
            // Get the URL from the input field
            const url = document.getElementById('url').value + '.json';
            
            // Fetch the JSON data from the Reddit post
            const response = await fetch(url);
            const data = await response.json();
            
            // Get the list of comments
            const comments = data[1].data.children;
            
            let markdownOutput = '';
            
            // Recursive function to handle nested comments
            function parseComment(comment) {
                if (comment.kind === 't1') {  // t1 signifies a comment
                    const author = comment.data.author;
                    const body = comment.data.body;
                    
                    // Convert to Markdown (here, we're just adding bold formatting to the author name)
                    markdownOutput += `**${author}** : ${body}\n\n`;
                    
                    // Check for replies to the comment
                    if ('replies' in comment.data && comment.data.replies !== '') {
                        for (let reply of comment.data.replies.data.children) {
                            parseComment(reply);
                        }
                    }
                }
            }
            
            // Loop through the comments
            for (let comment of comments) {
                parseComment(comment);
            }
            
            // Output the comments in the textarea
            document.getElementById('output').value = markdownOutput;
        }

        function copyToClipboard() {
            // Select the text
            document.getElementById('output').select();
            // Execute the "copy" command
            document.execCommand('copy');
        }
    </script>
</body>
</html>
